<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }

        #box1{
            width: 100px;
            height: 100px;
            background-color: #bfa;
            position: absolute;
            left: 0px;
        }
        #box2{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
            left: 0px;
            top: 300px;
        }
    </style>

    <script src="./tools.js"></script>
    <script>
        window.onload = function(){
            var box1 = document.getElementById("box1");
            var btn01 = document.getElementById("btn01");
            var btn02 = document.getElementById("btn02");
            var btn03 = document.getElementById("btn03");
            var btn04 = document.getElementById("btn04");

            btn01.onclick = function(){
                move(box1, "left", 800, 10);
            };
            btn02.onclick = function(){
                move(box1, "left", 0, 10);
            };
            btn03.onclick = function(){
                move(box2, "left", 800, 10);
            };
            btn04.onclick = function(){
                move(box2, "width", 800, 10, function(){
                    move(box2, "height", 400, 10, function(){

                    });
                });
            };
            
        };
        /*
            目前我们的定时器标识由全局变量timer保存，
                所有正在执行的定时器都在这个变量中保存
        */
        // var timer;
        /*
            尝试创建一个可以执行简单动画的函数
            参数：
                obj: 要执行动画的对象
                attr: 要执行动画的样式  比如：left,top,width,height
                target：执行动画的目标位置
                speed: 移动的速度
                callback: 回调函数  这个函数将在动画执行完毕后执行
        */
        // function move(obj, attr, target, speed, callback){
        //     // 关闭上一个定时器（跟练习27一样）
        //     clearInterval(obj.timer);

        //     // 获取元素目前的位置
        //     var current = parseInt(getStyle(obj, attr));

        //     // 判断speed正负
        //     // 如果从0向800移动，则speed为正
        //     // 如果从800向0移动，则speed为负
        //     if(current > target){
        //         speed = -speed;
        //     }

        //     // 开启一个定时器，执行动画效果
        //     // 向执行动画的对象中添加一个timer属性，用来保存它自己的定时器标识
        //     obj.timer = setInterval(function(){
        //         // 获取box1原来的left值
        //         var oldValue = parseInt(getStyle(obj, attr));

        //         // 在旧值的基础上要增加
        //         var newValue = oldValue + speed;
                
        //         // 向左移动，需要判断newValue是否小于target
        //         // 向右移动，需要判断newValue是否大于target
        //         if((newValue > target && speed > 0) || (newValue < target && speed < 0)){
        //             newValue = target;
        //         }

        //         // 将新值设置给box1
        //         obj.style[attr] = newValue + "px";
                
        //         // 当元素移动到800px时，使其停止移动动画
        //         if(newValue == target){
        //             // 到达目标，关闭定时器
        //             clearInterval(obj.timer);

        //             // 动画执行完毕，来调用回调函数
        //             /*
        //                 当没有传递回调函数时，callback是undefined，即为false
        //                     就不会执行callback了
        //             */
        //             callback && callback();
        //         }
        //     }, 30);
        
            
        // }
        
        // function getStyle(obj, name){
        //     if(window.getComputedStyle){
        //         return getComputedStyle(obj, null)[name];
        //     }
        //     else{
        //         return obj.currentStyle[name];
        //     }
        
        // }
        </script>
</head>
<body>
    <button id="btn01">点击按钮后box1向右移动</button>
    <br><br>
    <button id="btn02">点击按钮后box1向左移动</button>
    <br><br>
    <button id="btn03">点击按钮后box2向右移动</button>
    <br><br>
    <button id="btn04">测试</button>
    <br><br>
    <div id="box1"></div>
    <div id="box2"></div>
    <div style="height:1000px; width:0px; position: absolute; top:0; left:800px; border: solid 1px black;"></div>
</body>
</html>